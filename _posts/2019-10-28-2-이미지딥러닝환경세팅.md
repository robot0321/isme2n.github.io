---
layout: post
title: 이미지 딥러닝을 위한 환경 세팅
subtitle: Environment settings for deep learning for image
categories: intelligence
tags: deeplearning
comments: true
---
오랜만에 환경 업그레이드를 하기로 했습니다. 기존에는 Ubuntu 16.04 LTS에 Tensorflow 1.12, CUDA 8.0, OpenCV 3.3.1를 사용하고 있었으나, 모종의 이유로 인해 패키지 의존성이 깨졌기 때문에 - 며칠 동안 고통 받다가 - 환경을 업그레이드 하기로 했습니다. 새롭게 업데이트 할 스펙은 **Ubuntu 18.04 LTS, TensorFlow 2.0, CUDA 10.1, OpenCV 4.1.1**으로 현재 기준으로 제일 최신 스펙입니다. 그리고 최신 스펙 답게 설치할 때 많은 문제점을 야기합니다. 그래도 우분투를 100번 이상 밀어본 경험으로 인해 덜 고통받고 끝났던거 같습니다. 이 글은 해당 프로그램들을 설치하는데 저에게 발생했던 문제들과 해결점들을 게시함으로써 설치에 조금이라도 도움을 주고자 작성하였습니다. 
Ubuntu나, TF, CUDA는 그래도 자동화된 설치를 지원하기 때문에 비교적 편하지만, OpenCV는 직접 옵션을 지정해서 빌드하고 설치해야 하기 때문에 많은 고통과 시간 낭비를 야기합니다. 따라서 OpenCV 설치에 힘을 많이 줘서 작성하였습니다. 또한 이 글들은 이미지 딥러닝을 위한 환경을 만드는 것이기 때문에 언급한 프로그램 외에도 자잘한 프로그램들이 설치하는 것이 설명되어 있습니다.
한 글 안으로 모두 밀어 넣으면 보기 힘들기 때문에 조각조각 나눠서 글을 올렸고 아래에 링크를 달아두었습니다. 바라건대 이 글들로 인해 고통의 시간들이 조금이나마 줄었으면 합니다. :)

**중요!!!!**
환경이 워낙 방대한 탓인지, 버전 조합에 따라 정상적으로 작동하고 작동하지 않는 일이 흔합니다. 그래서 공식적으로 *__정상적인 작동을 경험한 버전 세트__*를 [tested build configurations](https://www.tensorflow.org/install/source#linux) tensorflow 홈페이지에서 제공하고 있습니다. (참고로 한글 번역 페이지는 업데이트가 느리기 때문에 최신 정보를 보시려면 언어를 English로 바꾸야합니다.) 아무 버전 세트로 작성하면 나중에 결국 문제가 생길 수 있기 때문에 검증된 버전 세트로 빌드를 진행하는 것이 시간을 버리지 않는 핵심입니다. 
~~참고로 저는 compatibility 확인을 안하고 깔았다가 tensorflow에서 gpu 인식을 못하는 버그가 있어서 (한참의 삽질 후에) 다시 깔았습니다... 더군다나 이미 깔려있는 tf, cuda, opencv를 찌꺼기까지 찾아서 지우는 것도 일입니다 ㅠㅠ~~
그리하여 원래는 TF 2.0, CUDA 10.1, OpenCV 4.1.1이었지만, **TF=2.0, GCC=7.3.1, cuDNN=7.4.2, CUDA=10.0**으로 선정하였습니다. 참고로 cuDNN은 7.4라고만 표기되어 있어서 7.4.1인지 7.4.2인지 모르겠지만 저는 후자를 택했습니다.

설치 방법 링크 <Installation Method>
**Ubuntu 18.04 LTS:** [go!](https://robot0321.github.io/2019-10-29-3-%EC%9A%B0%EB%B6%84%ED%88%AC1804%EC%84%A4%EC%B9%98/)

**CUDA 10.1:** not yet

**Tensorflow 2.0:** [go!]()

**OpenCV 4.1.1:** not yet
